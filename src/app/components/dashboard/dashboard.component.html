<div class="min-h-screen bg-gray-100 p-6 flex justify-center items-start">
  
  <div class="w-full max-w-[95%] grid grid-cols-1 lg:grid-cols-12 gap-8">

    <div class="bg-white p-8 rounded-xl shadow-lg lg:col-span-4 h-fit border-t-4 border-blue-600">
      <h2 class="text-2xl font-bold mb-6 text-blue-700">Registrar Venta</h2>

      <div class="mb-5">
        <label class="block text-gray-700 font-semibold mb-2 text-lg">Categoría</label>
        <select 
          [(ngModel)]="filtros.categoriaId" 
          (change)="onCategoriaChange()"
          class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg">
          <option value="">-- Selecciona Categoría --</option>
          <option *ngFor="let c of categorias" [value]="c.id">{{ c.nombre }}</option>
        </select>
      </div>

      <div class="mb-5">
        <label class="block text-gray-700 font-semibold mb-2 text-lg">Marca</label>
        <select 
          [(ngModel)]="filtros.marcaId"
          [disabled]="!marcasFiltradas.length"
          class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-200 text-lg">
          <option value="">-- Selecciona Marca --</option>
          <option *ngFor="let m of marcasFiltradas" [value]="m.id">{{ m.nombre }}</option>
        </select>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-8">
        <div>
          <label class="block text-gray-700 font-semibold mb-2 text-lg">Monto (S/.)</label>
          <input 
            type="number" 
            [(ngModel)]="filtros.monto"
            class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg">
        </div>
        <div>
          <label class="block text-gray-700 font-semibold mb-2 text-lg">Cantidad</label>
          <input 
            type="number" 
            [(ngModel)]="filtros.cantidad"
            class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg">
        </div>
      </div>

      <button 
        (click)="registrarVenta()"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg transition duration-300 text-xl shadow-md">
        Guardar Venta
      </button>
    </div>

    <div class="bg-white p-8 rounded-xl shadow-lg lg:col-span-8 border-t-4 border-green-500 flex flex-col">
      <h2 class="text-2xl font-bold mb-6 text-green-700">Reporte de Ventas y Rendimiento</h2>
      
      <div class="relative w-full"> <canvas *ngIf="isBrowser" 
          baseChart
          [data]="barChartData"
          [options]="barChartOptions"
          [type]="barChartType">
        </canvas>
        <p *ngIf="!isBrowser" class="text-center text-gray-400 mt-20 text-xl">Cargando gráfico...</p>
      </div>
      
      <div class="mt-6 text-gray-500 text-center text-lg bg-gray-50 p-3 rounded">
        * <strong>Barra Azul:</strong> Dinero Ganado | <strong>Línea Roja:</strong> Cantidad de Productos
      </div>
    </div>

  </div>
</div>